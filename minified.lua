repeat wait()until game:IsLoaded()wait(7)if game.ReplicatedStorage:FindFirstChild("EventMatchmakingRemotes")then local a={}a.set=function(b,c,d)game.ReplicatedStorage.EventMatchmakingRemotes.createparty:FireServer({["Difficulty"]=c,["Code"]="",["Map"]=b,["ModNames"]="",["Modifier1"]=d[1]and d[1]or"",["Modifier2"]=d[2]and d[2]or"",["Modifier3"]=d[3]and d[3]or""})game.ReplicatedStorage.EventParties.DescendantAdded:Connect(function(e)if e:IsA("StringValue")then if e.Value==game.Players.LocalPlayer.Name then game.ReplicatedStorage.EventMatchmakingRemotes.start:FireServer(e.Parent)end end end)wait(9e9)end;return a else local f=game:GetService("VirtualUser")game:GetService("Players").LocalPlayer.Idled:connect(function()f:Button2Down(Vector2.new(0,0),workspace.CurrentCamera.CFrame)wait(1)f:Button2Up(Vector2.new(0,0),workspace.CurrentCamera.CFrame)end)local g=game.Players.LocalPlayer.PlayerGui.DefeatWinScreen.Back;g:GetPropertyChangedSignal("Visible"):Connect(function()if g.Visible then if string.match(readfile("pgtdwebhook.txt"),"api/webhooks")then syn.request({["Url"]=readfile("pgtdwebhook.txt"),["Method"]="POST",["Headers"]={["Content-Type"]="application/json"},["Body"]=game.HttpService:JSONEncode({["embeds"]={{["title"]="Game Log ("..os.date("%Y-%m-%d %H:%M:%S")..")",["description"]="Game finished in "..tostring(math.floor(time()/60))..":"..string.format("%02d",math.floor(time()%60)).."\nMap: "..workspace.Configuration.MapName.Value.."\nCoins: "..tostring(math.floor(workspace.MatchRewards.Coins.Value)).."\nEXP: "..tostring(math.floor(workspace.MatchRewards.Exp.Value))..""}}})})end;game.TeleportService:Teleport(6949542776,game.Players.LocalPlayer)end end)local a={}local h={}local i={}local j=nil;local k=workspace.Configuration:FindFirstChild("Wave")k:GetPropertyChangedSignal("Value"):Connect(function()if k.Value>0 then if k.Value==1 then j=workspace:GetServerTimeNow()end end end)function getCurrentTime()return math.floor((workspace:GetServerTimeNow()-j)*100)/100 end;game.RunService.Heartbeat:Connect(function()if k.Value>0 then for l,m in pairs(h)do if tonumber(m.Timer)<=tonumber(getCurrentTime())then if m.Type=="Tower"then game.ReplicatedStorage.PlaceTower:FireServer(m.Pos1,m.Tower,m.Gun,nil,m.Ground,m.Pos2)elseif m.Type=="Ability"then game.ReplicatedStorage.PlaceTower:FireServer(m.Pos1,nil,nil,m.Ability,m.Ground,m.Pos2)end;table.remove(h,l)end end;for l,m in pairs(i)do if tonumber(m.Timer)<=tonumber(getCurrentTime())then if m.Type=="Upgrade"then a.getTrueTowers()[m.Tower].Action:FireServer("Upgrade",m.Upgrade)elseif m.Type=="Sell"then a.getTrueTowers()[m.Tower].Action:FireServer("Sell")elseif m.Type=="Target"then a.getTrueTowers()[m.Tower].Action:FireServer("Targetting",m.Target)end;table.remove(i,l)end end end end)a.placeTower=function(n,o,p,q,r,s)if s==0 then game.ReplicatedStorage.PlaceTower:FireServer(p,n,o,nil,r,q)wait(0.2)else table.insert(h,{["Tower"]=n,["Gun"]=o,["Pos1"]=p,["Pos2"]=q,["Ground"]=r,["Timer"]=s,["Type"]="Tower"})end end;a.useAbility=function(t,p,q,r,s)if s==0 then game.ReplicatedStorage.PlaceTower:FireServer(p,nil,nil,t,r,q)wait(0.2)else table.insert(h,{["Ability"]=t,["Pos1"]=p,["Pos2"]=q,["Ground"]=r,["Timer"]=s,["Type"]="Ability"})end end;a.upgradeTower=function(n,u,s)if s==0 then a.getTrueTowers()[n].Action:FireServer("Upgrade",u)wait(0.2)else table.insert(i,{["Tower"]=n,["Upgrade"]=u,["Timer"]=s,["Type"]="Upgrade"})end end;a.sellTower=function(n,s)if s==0 then a.getTrueTowers()[n].Action:FireServer("Sell")wait(0.2)else table.insert(i,{["Tower"]=n,["Timer"]=s,["Type"]="Sell"})end end;a.changeTarget=function(n,v,s)if s==0 then a.getTrueTowers()[n].Action:FireServer("Targetting",v)wait(0.2)else table.insert(i,{["Tower"]=n,["Target"]=v,["Timer"]=s,["Type"]="Target"})end end;a.getTrueTowers=function()local w={}for l,m in pairs(workspace.Map.Towers:GetChildren())do if m.Name~="Mine"then table.insert(w,m)end end;return w end;a.set=function(x,y,z)end;return a end
