repeat wait()until game:IsLoaded()wait(3)if game.ReplicatedStorage:FindFirstChild("EventMatchmakingRemotes")then local a={}a.set=function(b,c,d)for e,f in pairs(d)do if not f then d[e]=""end end;game.ReplicatedStorage.EventMatchmakingRemotes.createparty:FireServer({["Difficulty"]=c,["Code"]="",["Map"]=b,["ModNames"]="",["Modifier1"]=d[1],["Modifier2"]=d[2],["Modifier3"]=d[3]})game.ReplicatedStorage.EventParties.DescendantAdded:Connect(function(g)if g:IsA("StringValue")then if g.Value==game.Players.LocalPlayer.Name then game.ReplicatedStorage.EventMatchmakingRemotes.start:FireServer(g.Parent)end end end)wait(9e9)end;return a else wait(3)local h=game:GetService("VirtualUser")game:GetService("Players").LocalPlayer.Idled:connect(function()h:Button2Down(Vector2.new(0,0),workspace.CurrentCamera.CFrame)wait(1)h:Button2Up(Vector2.new(0,0),workspace.CurrentCamera.CFrame)end)local i=game.Players.LocalPlayer.PlayerGui.DefeatWinScreen.Back;i:GetPropertyChangedSignal("Visible"):Connect(function()if i.Visible then if string.match(readfile("pgtdwebhook.txt"),"api/webhooks")then syn.request({["Url"]=readfile("pgtdwebhook.txt"),["Method"]="POST",["Headers"]={["Content-Type"]="application/json"},["Body"]=game.HttpService:JSONEncode({["embeds"]={{["title"]="Game Log ("..os.date("%Y-%m-%d %H:%M:%S")..")",["description"]="Game finished in "..tostring(math.floor(time()/60))..":"..string.format("%02d",math.floor(time()%60)).."\nMap: "..workspace.Configuration.MapName.Value.."\nCoins: "..tostring(math.floor(workspace.MatchRewards.Coins.Value)).."\nEXP: "..tostring(math.floor(workspace.MatchRewards.Exp.Value))..""}}})})end;game.TeleportService:Teleport(6949542776,game.Players.LocalPlayer)end end)local a={}local j={}local k={}local l=nil;local m=workspace.Configuration:FindFirstChild("Wave")m:GetPropertyChangedSignal("Value"):Connect(function()if m.Value>0 then if m.Value==1 then l=workspace:GetServerTimeNow()end end end)function getCurrentTime()return math.floor((workspace:GetServerTimeNow()-l)*100)/100 end;game.RunService.Heartbeat:Connect(function()if m.Value>0 then for e,f in pairs(j)do if tonumber(f.Timer)<=tonumber(getCurrentTime())then if f.Type=="Tower"then game.ReplicatedStorage.PlaceTower:FireServer(f.Pos1,f.Tower,f.Gun,nil,f.Ground,f.Pos2)elseif f.Type=="Ability"then game.ReplicatedStorage.PlaceTower:FireServer(f.Pos1,nil,nil,f.Ability,f.Ground,f.Pos2)end;table.remove(j,e)end end;for e,f in pairs(k)do if tonumber(f.Timer)<=tonumber(getCurrentTime())then if f.Type=="Upgrade"then a.getTrueTowers()[f.Tower].Action:FireServer("Upgrade",f.Upgrade)elseif f.Type=="Sell"then a.getTrueTowers()[f.Tower].Action:FireServer("Sell")elseif f.Type=="Target"then a.getTrueTowers()[f.Tower].Action:FireServer("Targetting",f.Target)end;table.remove(k,e)end end end end)a.placeTower=function(n,o,p,q,r,s)if s==0 then game.ReplicatedStorage.PlaceTower:FireServer(p,n,o,nil,r,q)wait(0.2)else table.insert(j,{["Tower"]=n,["Gun"]=o,["Pos1"]=p,["Pos2"]=q,["Ground"]=r,["Timer"]=s,["Type"]="Tower"})end end;a.useAbility=function(t,p,q,r,s)if s==0 then game.ReplicatedStorage.PlaceTower:FireServer(p,nil,nil,t,r,q)wait(0.2)else table.insert(j,{["Ability"]=t,["Pos1"]=p,["Pos2"]=q,["Ground"]=r,["Timer"]=s,["Type"]="Ability"})end end;a.upgradeTower=function(n,u,s)if s==0 then a.getTrueTowers()[n].Action:FireServer("Upgrade",u)wait(0.2)else table.insert(k,{["Tower"]=n,["Upgrade"]=u,["Timer"]=s,["Type"]="Upgrade"})end end;a.sellTower=function(n,s)if s==0 then a.getTrueTowers()[n].Action:FireServer("Sell")wait(0.2)else table.insert(k,{["Tower"]=n,["Timer"]=s,["Type"]="Sell"})end end;a.changeTarget=function(n,v,s)if s==0 then a.getTrueTowers()[n].Action:FireServer("Targetting",v)wait(0.2)else table.insert(k,{["Tower"]=n,["Target"]=v,["Timer"]=s,["Type"]="Target"})end end;a.getTrueTowers=function()local w={}for e,f in pairs(workspace.Map.Towers:GetChildren())do if f.Name~="Mine"then table.insert(w,f)end end;return w end;a.set=function(x,y,z)end;return a end
